#!/usr/bin/env python

"""

A super simple 8x7 pixel monospace font that can be used to generate
bitmaps.

Usage:

    mybitmap = string_bitmap('Hello world!')
    mybitmap.dump()  # helper to dump to console

Or from the console:

    $ python simplefont.py 'Hello world!'

Both will result in:

    ##  ##           ###     ###                                             ###       ###     ##   
    ##  ##            ##      ##                                              ##        ##    ####  
    ##  ##   ####     ##      ##     ####           ##   ##  ####   ## ###    ##        ##    ####  
    ######  ##  ##    ##      ##    ##  ##          ## # ## ##  ##   ### ##   ##     #####     ##   
    ##  ##  ######    ##      ##    ##  ##          ####### ##  ##   ##  ##   ##    ##  ##     ##   
    ##  ##  ##        ##      ##    ##  ##          ####### ##  ##   ##       ##    ##  ##          
    ##  ##   ####    ####    ####    ####            ## ##   ####   ####     ####    ### ##    ##   

See Bitmap 

The letters in this font are loosely based on the public domain font defined by Marcel Sondaar in ASM and then
ported to C by Daniel Hepper. See https://github.com/dhepper/font8x8 for full credits. I made minor modifications
to resize the font to 8x7. 

- Joe Walnes @joewalnes

"""
from bitmap import Bitmap


def char_bitmap(char):
    """
    Given a single character, generate a Bitmap of that font. This will be width 8, height 7.
    
    See bitmap.py
    """
    char_def = DATA.get(char, DATA[FALLBACK_CHAR])
    assert len(char_def) == WIDTH * HEIGHT, "bad char definition for char '%s'" % char
    bm = Bitmap(WIDTH, HEIGHT)
    for y in range(HEIGHT):
        for x in range(WIDTH):
            bm.data[y][x] = 0 if char_def[x + (y * WIDTH)] == ' ' else 1
    return bm


def string_bitmap(text):
    """
    Like char_bitmap() but takes a string and returns a bitmap of the entire word.

    The resulting width will by len(text) * 8, and height 7.
    
    See bitmap.py
    """
    bm = Bitmap(WIDTH * len(text), HEIGHT)
    for i, char in enumerate(text):
        bm.apply(char_bitmap(char), x=i * WIDTH, y=0)
    return bm


WIDTH = 8
HEIGHT = 7
FALLBACK_CHAR = '.'  # when char is not available

DATA = {
    ' ': (
        '        '
        '        '
        '        '
        '        '
        '        '
        '        '
        '        '
    ),
    '!': (
        '   ##   '
        '  ####  '
        '  ####  '
        '   ##   '
        '   ##   '
        '        '
        '   ##   '
    ),
    '"': (
        ' ## ##  '
        ' ## ##  '
        '        '
        '        '
        '        '
        '        '
        '        '
    ),
    '#': (
        ' ## ##  '
        ' ## ##  '
        '####### '
        ' ## ##  '
        '####### '
        ' ## ##  '
        ' ## ##  '
    ),
    '$': (
        '  ##    '
        ' #####  '
        '##      '
        ' ####   '
        '    ##  '
        '#####   '
        '  ##    '
    ),
    '%': (
        '        '
        '##   ## '
        '##  ##  '
        '   ##   '
        '  ##    '
        ' ##  ## '
        '##   ## '
    ),
    '&': (
        '  ###   '
        ' ## ##  '
        '  ###   '
        ' ### ## '
        '## ###  '
        '##  ##  '
        ' ### ## '
    ),
    '\'': (
        ' ##     '
        ' ##     '
        '##      '
        '        '
        '        '
        '        '
        '        '
    ),
    '(': (
        '   ##   '
        '  ##    '
        ' ##     '
        ' ##     '
        ' ##     '
        '  ##    '
        '   ##   '
    ),
    ')': (
        ' ##     '
        '  ##    '
        '   ##   '
        '   ##   '
        '   ##   '
        '  ##    '
        ' ##     '
    ),
    '*': (
        '        '
        ' ## ##  '
        '  ###   '
        '####### '
        '  ###   '
        ' ## ##  '
        '        '
    ),
    '+': (
        '        '
        '  ##    '
        '  ##    '
        '######  '
        '  ##    '
        '  ##    '
        '        '
    ),
    ',': (
        '        '
        '        '
        '        '
        '        '
        '  ##    '
        '  ##    '
        ' ##     '
    ),
    '-': (
        '        '
        '        '
        '        '
        '######  '
        '        '
        '        '
        '        '
    ),
    '.': (
        '        '
        '        '
        '        '
        '        '
        '        '
        '  ##    '
        '  ##    '
    ),
    '/': (
        '     ## '
        '    ##  '
        '   ##   '
        '  ##    '
        ' ##     '
        '##      '
        '#       '
    ),
    '0': (
        ' #####  '
        '##   ## '
        '##  ### '
        '## #### '
        '#### ## '
        '###  ## '
        ' #####  '
    ),
    '1': (
        '  ##    '
        ' ###    '
        '  ##    '
        '  ##    '
        '  ##    '
        '  ##    '
        '######  '
    ),
    '2': (
        ' ####   '
        '##  ##  '
        '    ##  '
        '  ###   '
        ' ##     '
        '##  ##  '
        '######  '
    ),
    '3': (
        ' ####   '
        '##  ##  '
        '    ##  '
        '  ###   '
        '    ##  '
        '##  ##  '
        ' ####   '
    ),
    '4': (
        '   ###  '
        '  ####  '
        ' ## ##  '
        '##  ##  '
        '####### '
        '    ##  '
        '   #### '
    ),
    '5': (
        '######  '
        '##      '
        '#####   '
        '    ##  '
        '    ##  '
        '##  ##  '
        ' ####   '
    ),
    '6': (
        '  ###   '
        ' ##     '
        '##      '
        '#####   '
        '##  ##  '
        '##  ##  '
        ' ####   '
    ),
    '7': (
        '######  '
        '##  ##  '
        '    ##  '
        '   ##   '
        '  ##    '
        '  ##    '
        '  ##    '
    ),
    '8': (
        ' ####   '
        '##  ##  '
        '##  ##  '
        ' ####   '
        '##  ##  '
        '##  ##  '
        ' ####   '
    ),
    '9': (
        ' ####   '
        '##  ##  '
        '##  ##  '
        ' #####  '
        '    ##  '
        '   ##   '
        ' ###    '
    ),
    ':': (
        '        '
        '  ##    '
        '  ##    '
        '        '
        '  ##    '
        '  ##    '
        '        '
    ),
    ';': (
        '        '
        '  ##    '
        '  ##    '
        '        '
        '  ##    '
        '  ##    '
        ' ##     '
    ),
    '<': (
        '   ##   '
        '  ##    '
        ' ##     '
        '##      '
        ' ##     '
        '  ##    '
        '   ##   '
    ),
    '=': (
        '        '
        '        '
        '######  '
        '        '
        '######  '
        '        '
        '        '
    ),
    '>': (
        ' ##     '
        '  ##    '
        '   ##   '
        '    ##  '
        '   ##   '
        '  ##    '
        ' ##     '
    ),
    '?': (
        ' ####   '
        '##  ##  '
        '    ##  '
        '   ##   '
        '  ##    '
        '        '
        '  ##    '
    ),
    '@': (
        ' #####  '
        '##   ## '
        '## #### '
        '## #### '
        '## #### '
        '##      '
        ' ####   '
    ),
    'A': (
        '  ##    '
        ' ####   '
        '##  ##  '
        '##  ##  '
        '######  '
        '##  ##  '
        '##  ##  '
    ),
    'B': (
        '######  '
        ' ##  ## '
        ' ##  ## '
        ' #####  '
        ' ##  ## '
        ' ##  ## '
        '######  '
    ),
    'C': (
        '  ####  '
        ' ##  ## '
        '##      '
        '##      '
        '##      '
        ' ##  ## '
        '  ####  '
    ),
    'D': (
        '#####   '
        ' ## ##  '
        ' ##  ## '
        ' ##  ## '
        ' ##  ## '
        ' ## ##  '
        '#####   '
    ),
    'E': (
        '####### '
        ' ##   # '
        ' ## #   '
        ' ####   '
        ' ## #   '
        ' ##   # '
        '####### '
    ),
    'F': (
        '####### '
        ' ##   # '
        ' ## #   '
        ' ####   '
        ' ## #   '
        ' ##     '
        '####    '
    ),
    'G': (
        '  ####  '
        ' ##  ## '
        '##      '
        '##      '
        '##  ### '
        ' ##  ## '
        '  ##### '
    ),
    'H': (
        '##  ##  '
        '##  ##  '
        '##  ##  '
        '######  '
        '##  ##  '
        '##  ##  '
        '##  ##  '
    ),
    'I': (
        ' ####   '
        '  ##    '
        '  ##    '
        '  ##    '
        '  ##    '
        '  ##    '
        ' ####   '
    ),
    'J': (
        '   #### '
        '    ##  '
        '    ##  '
        '    ##  '
        '##  ##  '
        '##  ##  '
        ' ####   '
    ),
    'K': (
        '###  ## '
        ' ##  ## '
        ' ## ##  '
        ' ####   '
        ' ## ##  '
        ' ##  ## '
        '###  ## '
    ),
    'L': (
        '####    '
        ' ##     '
        ' ##     '
        ' ##     '
        ' ##   # '
        ' ##  ## '
        '####### '
    ),
    'M': (
        '##   ## '
        '### ### '
        '####### '
        '####### '
        '## # ## '
        '##   ## '
        '##   ## '
    ),
    'N': (
        '##   ## '
        '###  ## '
        '#### ## '
        '## #### '
        '##  ### '
        '##   ## '
        '##   ## '
    ),
    'O': (
        '  ###   '
        ' ## ##  '
        '##   ## '
        '##   ## '
        '##   ## '
        ' ## ##  '
        '  ###   '
    ),
    'P': (
        '######  '
        ' ##  ## '
        ' ##  ## '
        ' #####  '
        ' ##     '
        ' ##     '
        '####    '
    ),
    'Q': (
        ' ####   '
        '##  ##  '
        '##  ##  '
        '##  ##  '
        '## ###  '
        ' ####   '
        '   ###  '
    ),
    'R': (
        '######  '
        ' ##  ## '
        ' ##  ## '
        ' #####  '
        ' ## ##  '
        ' ##  ## '
        '###  ## '
    ),
    'S': (
        ' ####   '
        '##  ##  '
        '###     '
        ' ###    '
        '   ###  '
        '##  ##  '
        ' ####   '
    ),
    'T': (
        '######  '
        '# ## #  '
        '  ##    '
        '  ##    '
        '  ##    '
        '  ##    '
        ' ####   '
    ),
    'U': (
        '##  ##  '
        '##  ##  '
        '##  ##  '
        '##  ##  '
        '##  ##  '
        '##  ##  '
        '######  '
    ),
    'V': (
        '##  ##  '
        '##  ##  '
        '##  ##  '
        '##  ##  '
        '##  ##  '
        ' ####   '
        '  ##    '
    ),
    'W': (
        '##   ## '
        '##   ## '
        '##   ## '
        '## # ## '
        '####### '
        '### ### '
        '##   ## '
    ),
    'X': (
        '##   ## '
        '##   ## '
        ' ## ##  '
        '  ###   '
        '  ###   '
        ' ## ##  '
        '##   ## '
    ),
    'Y': (
        '##  ##  '
        '##  ##  '
        '##  ##  '
        ' ####   '
        '  ##    '
        '  ##    '
        ' ####   '
    ),
    'Z': (
        '####### '
        '##   ## '
        '#   ##  '
        '   ##   '
        '  ##  # '
        ' ##  ## '
        '####### '
    ),
    '[': (
        ' ####   '
        ' ##     '
        ' ##     '
        ' ##     '
        ' ##     '
        ' ##     '
        ' ####   '
    ),
    '\\': (
        '##      '
        ' ##     '
        '  ##    '
        '   ##   '
        '    ##  '
        '     ## '
        '      # '
    ),
    ']': (
        ' ####   '
        '   ##   '
        '   ##   '
        '   ##   '
        '   ##   '
        '   ##   '
        ' ####   '
    ),
    '^': (
        '   #    '
        '  ###   '
        ' ## ##  '
        '##   ## '
        '        '
        '        '
        '        '
    ),
    '_': (
        '        '
        '        '
        '        '
        '        '
        '        '
        '        '
        '####### '
    ),
    '`': (
        '  ##    '
        '  ##    '
        '   ##   '
        '        '
        '        '
        '        '
        '        '
    ),
    'a': (
        '        '
        '        '
        ' ####   '
        '    ##  '
        ' #####  '
        '##  ##  '
        ' ### ## '
    ),
    'b': (
        '###     '
        ' ##     '
        ' ##     '
        ' #####  '
        ' ##  ## '
        ' ##  ## '
        '## ###  '
    ),
    'c': (
        '        '
        '        '
        ' ####   '
        '##  ##  '
        '##      '
        '##  ##  '
        ' ####   '
    ),
    'd': (
        '   ###  '
        '    ##  '
        '    ##  '
        ' #####  '
        '##  ##  '
        '##  ##  '
        ' ### ## '
    ),
    'e': (
        '        '
        '        '
        ' ####   '
        '##  ##  '
        '######  '
        '##      '
        ' ####   '
    ),
    'f': (
        '  ###   '
        ' ## ##  '
        ' ##     '
        '####    '
        ' ##     '
        ' ##     '
        '####    '
    ),
    'g': (
        '        '
        '        '
        ' ### ## '
        '##  ##  '
        ' #####  '
        '    ##  '
        '#####   '
    ),
    'h': (
        '###     '
        ' ##     '
        ' ## ##  '
        ' ### ## '
        ' ##  ## '
        ' ##  ## '
        '###  ## '
    ),
    'i': (
        '  ##    '
        '        '
        ' ###    '
        '  ##    '
        '  ##    '
        '  ##    '
        ' ####   '
    ),
    'j': (
        '    ##  '
        '        '
        '    ##  '
        '    ##  '
        '##  ##  '
        '##  ##  '
        ' ####   '
    ),
    'k': (
        '###     '
        ' ##     '
        ' ##  ## '
        ' ## ##  '
        ' ####   '
        ' ## ##  '
        '###  ## '
    ),
    'l': (
        ' ###    '
        '  ##    '
        '  ##    '
        '  ##    '
        '  ##    '
        '  ##    '
        ' ####   '
    ),
    'm': (
        '        '
        '        '
        '##  ##  '
        '####### '
        '####### '
        '## # ## '
        '##   ## '
    ),
    'n': (
        '        '
        '        '
        '#####   '
        '##  ##  '
        '##  ##  '
        '##  ##  '
        '##  ##  '
    ),
    'o': (
        '        '
        '        '
        ' ####   '
        '##  ##  '
        '##  ##  '
        '##  ##  '
        ' ####   '
    ),
    'p': (
        '        '
        '        '
        '## ###  '
        ' ##  ## '
        ' #####  '
        ' ##     '
        '###     '
    ),
    'q': (
        '        '
        '        '
        ' ### ## '
        '##  ##  '
        ' #####  '
        '    ##  '
        '    ### '
    ),
    'r': (
        '        '
        '        '
        '## ###  '
        ' ### ## '
        ' ##  ## '
        ' ##     '
        '####    '
    ),
    's': (
        '        '
        '        '
        ' #####  '
        '##      '
        ' ####   '
        '    ##  '
        '#####   '
    ),
    't': (
        '   #    '
        '  ##    '
        ' #####  '
        '  ##    '
        '  ##    '
        '  ## #  '
        '   ##   '
    ),
    'u': (
        '        '
        '        '
        '##  ##  '
        '##  ##  '
        '##  ##  '
        '##  ##  '
        ' ### ## '
    ),
    'v': (
        '        '
        '        '
        '##  ##  '
        '##  ##  '
        '##  ##  '
        ' ####   '
        '  ##    '
    ),
    'w': (
        '        '
        '        '
        '##   ## '
        '## # ## '
        '####### '
        '####### '
        ' ## ##  '
    ),
    'x': (
        '        '
        '        '
        '##   ## '
        ' ## ##  '
        '  ###   '
        ' ## ##  '
        '##   ## '
    ),
    'y': (
        '        '
        '        '
        '##  ##  '
        '##  ##  '
        ' #####  '
        '    ##  '
        ' ####   '
    ),
    'z': (
        '        '
        '        '
        '######  '
        '#  ##   '
        '  ##    '
        ' ##  #  '
        '######  '
    ),
    '{': (
        '   ###  '
        '  ##    '
        '  ##    '
        '###     '
        '  ##    '
        '  ##    '
        '   ###  '
    ),
    '|': (
        '   ##   '
        '   ##   '
        '   ##   '
        '   ##   '
        '   ##   '
        '   ##   '
        '   ##   '
    ),
    '}': (
        '###     '
        '  ##    '
        '  ##    '
        '   ###  '
        '  ##    '
        '  ##    '
        '###     '
    ),
    '~': (
        '        '
        '        '
        ' ### ## '
        '## ###  '
        '        '
        '        '
        '        '
    ),
}


# Command line helper that will echo text back rendered in font
if __name__ == '__main__':
    from sys import argv
    text = ' '.join(argv[1:])
    bm = string_bitmap(text)
    bm.dump()
